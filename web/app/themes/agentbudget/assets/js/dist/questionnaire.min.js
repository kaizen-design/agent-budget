"use strict";var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],r=!0,o=!1,i=void 0;try{for(var n,s=e[Symbol.iterator]();!(r=(n=s.next()).done)&&(a.push(n.value),!t||a.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},STORAGE=window.localStorage,QUESTIONNAIRE={},STATE={is_completed:!1,completed_forms:[],current_form:1};function initQuestionnaire(){showLoader(),STATE.is_completed?showSuccessModal():(STORAGE.getItem("questionnaire")&&loadQuestionnaire(QUESTIONNAIRE=JSON.parse(STORAGE.getItem("questionnaire"))),STORAGE.getItem("state")&&(STATE=JSON.parse(STORAGE.getItem("state"))),loadState()),setTimeout(function(){showLoader(!0)},1e3)}function loadQuestionnaire(e){for(var t in e){var a;!e.hasOwnProperty(t)||(a=$('input[name="'+t+'"]')).length&&(a.is(":radio")?$('input[name="'+t+'"][value="'+e[t]+'"]').prop("checked",!0):a.val(e[t]))}}function loadState(){setActiveForm(STATE.current_form),updateSidebarNav(STATE.current_form),updateProgressBar()}function updateState(e){e&&(updateSidebarNav(STATE.current_form=e),updateProgressBar()),STORAGE.setItem("state",JSON.stringify(STATE))}function updateStorage(e){var t=!0,a=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var n=o.value,s=_slicedToArray(n,2),c=s[0],u=s[1];QUESTIONNAIRE[c]=u,STORAGE.setItem("questionnaire",JSON.stringify(QUESTIONNAIRE))}}catch(e){a=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw r}}}function updateCompletedForms(e){var t=STATE.completed_forms;-1===t.indexOf(e)&&(t.push(e),STATE.completed_forms=t)}function updateSidebarNav(e){switch(!0){case 10<=e&&e<=12:setActiveNavItem(2);break;case 13<=e&&e<=19:setActiveNavItem(3);break;case 21<=e&&e<=35:setActiveNavItem(4);break;case 36<=e&&e<=41:setActiveNavItem(5);break;case 42<=e&&e<=73:setActiveNavItem(6);break;case 74<=e&&e<=78:setActiveNavItem(7);break;case 79===e:setActiveNavItem(8);break;case 80===e:setActiveNavItem(9);break;case 81===e:setActiveNavItem(10);break;default:setActiveNavItem(1)}}function setActiveNavItem(e){$(".questionnaire-nav .list-group-item-action").removeClass("active"),$('.questionnaire-nav .list-group-item-action[data-id="'+e+'"]').addClass("active")}function getActiveForm(){return $('.questionnaire-form[data-id="'+STATE.current_form+'"]')}function setActiveForm(e){switchForms(getActiveForm(),$('.questionnaire-form[data-id="'+e+'"]'))}function switchForms(e,t,a){t&&!isQuestionnaireCompleted()?(showLoader(),setTimeout(function(){e.addClass("d-none"),t.removeClass("d-none"),updateState(t.data("id")),a&&updateStorage(a),showLoader(!0)},1e3)):(STATE.is_completed=!0,updateState(),showSuccessModal())}function updateProgressBar(){var e=STATE.completed_forms.length,t=$(".questionnaire-form").length,t=Math.round(100*e/t)+"%";$(".progress-bar").css("width",t),$(".progress-bar-label").text(t+" Completed")}function isQuestionnaireCompleted(){return $(".questionnaire-form").length===STATE.completed_forms.length}function showSuccessModal(){new bootstrap.Modal(document.getElementById("successModal"),{backdrop:"static",keyboard:!1}).show()}$(document).ready(function(){initQuestionnaire(),$(".questionnaire-form").on("submit",function(e){e.preventDefault();e=$(this);e[0].checkValidity()?(updateCompletedForms(parseInt(e.data("id"))),switchForms(e,e.next(),new FormData(e[0]))):d_noty_alert("Please answer the question to proceed!","error"),e.addClass("was-validated")}),$(document).on("click",".acceptDefaultBtn",function(){var e=$(this).parent().prev(".form-control"),t=e.attr("placeholder");e.val(t)}),$(".pagination .page-link").on("click",function(){var e=$(this).data("id"),t=$('.questionnaire-form[data-id="'+e+'"]');switch($(this).data("action")){case"go-to-prev":switchForms(t,t.prev());break;case"go-to-next":switchForms(t,t.next())}}),$(".questionnaire-nav .list-group-item-action").on("click",function(){var e=$(this).data("id"),t=$(this).data("form-id");setActiveNavItem(e),setActiveForm(t)}),$(document).keypress(function(e){13===e.which&&getActiveForm().submit()}),$(".viewReportBtn").on("click",function(e){e.preventDefault(),QUESTIONNAIRE.is_report_available=!0,storeDataToWP(JSON.stringify(QUESTIONNAIRE),"/my-report/")}),initIMask()});